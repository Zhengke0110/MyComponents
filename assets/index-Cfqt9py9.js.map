{"version":3,"file":"index-Cfqt9py9.js","sources":["../../src/libs/ImagePreview/ImagePreview.tsx","../../src/libs/ImagePreview/View.vue"],"sourcesContent":["import { defineComponent, ref, PropType, Teleport, computed, watch, nextTick, toRef, onMounted, onBeforeUnmount, inject } from 'vue';\nimport './style.css';\n\n// 定义图片数据接口\nexport interface ImageItem {\n  url: string;\n  alt?: string;\n  thumbnailUrl?: string;\n}\n\nexport default defineComponent({\n  name: 'ImagePreview',\n  props: {\n    // 图片列表\n    images: {\n      type: Array as PropType<ImageItem[]>,\n      required: true,\n    },\n    // 是否可见\n    visible: {\n      type: Boolean,\n      default: false,\n    },\n    // 当前索引\n    current: {\n      type: Number,\n      default: 0,\n    },\n    // 点击遮罩层是否关闭\n    maskClosable: {\n      type: Boolean,\n      default: true,\n    },\n    // 切换时是否有动画\n    animated: {\n      type: Boolean,\n      default: true,\n    },\n    // 自定义z-index\n    zIndex: {\n      type: Number,\n      default: 1000,\n    },\n    // 缩放配置\n    zoom: {\n      type: Object,\n      default: () => ({ minScale: 0.5, maxScale: 3, step: 0.5 }),\n    },\n  },\n  emits: ['update:visible', 'update:current', 'close', 'change'],\n\n  setup(props, { emit }) {\n    // 内部状态\n    const isVisible = ref(props.visible);\n    const currentIndex = ref(props.current);\n    const scale = ref(1);\n    const rotating = ref(0);\n    const isMoving = ref(false);\n    const startX = ref(0);\n    const startY = ref(0);\n    const moveX = ref(0);\n    const moveY = ref(0);\n    const loading = ref(true);\n    const hasError = ref(false);\n\n    // 注入失败图片URL列表\n    const failedImageUrls = inject<Set<string>>('failedImageUrls', new Set());\n\n    // 监听外部属性变化\n    watch(() => props.visible, (val) => {\n      isVisible.value = val;\n      if (val) {\n        document.body.style.overflow = 'hidden';\n        nextTick(() => {\n          resetImageStatus();\n        });\n      } else {\n        document.body.style.overflow = '';\n      }\n    });\n\n    watch(() => props.current, (val) => {\n      currentIndex.value = val;\n    });\n\n    // 计算属性\n    const currentImage = computed(() => {\n      return props.images[currentIndex.value] || null;\n    });\n\n    // 检查当前图片是否已失败\n    const isCurrentImageFailed = computed(() => {\n      if (!currentImage.value) return false;\n      return failedImageUrls.has(currentImage.value.url);\n    });\n\n    const imageStyle = computed(() => {\n      return {\n        transform: `scale(${scale.value}) rotate(${rotating.value}deg) translate(${moveX.value}px, ${moveY.value}px)`,\n        transition: isMoving.value ? 'none' : 'transform 0.3s',\n      }\n    });\n\n    // 方法\n    const handleClose = () => {\n      isVisible.value = false;\n      emit('update:visible', false);\n      emit('close');\n    };\n\n    const prev = () => {\n      if (currentIndex.value > 0) {\n        currentIndex.value -= 1;\n        emit('update:current', currentIndex.value);\n        emit('change', currentIndex.value);\n        resetImageStatus();\n      }\n    };\n\n    const next = () => {\n      if (currentIndex.value < props.images.length - 1) {\n        currentIndex.value += 1;\n        emit('update:current', currentIndex.value);\n        emit('change', currentIndex.value);\n        resetImageStatus();\n      }\n    };\n\n    const resetImageStatus = () => {\n      scale.value = 1;\n      rotating.value = 0;\n      moveX.value = 0;\n      moveY.value = 0;\n      loading.value = true;\n      hasError.value = false;\n    };\n\n    const handleImageLoad = () => {\n      loading.value = false;\n    };\n\n    // 增强图片错误处理\n    const handleImageError = () => {\n      loading.value = false;\n      hasError.value = true;\n      \n      // 如果有当前图片，将其URL添加到失败列表中\n      if (currentImage.value) {\n        failedImageUrls.add(currentImage.value.url);\n        \n        // 尝试持久化存储失败URL\n        try {\n          const storedFailedUrls = JSON.parse(localStorage.getItem('failedImageUrls') || '[]');\n          if (!storedFailedUrls.includes(currentImage.value.url)) {\n            storedFailedUrls.push(currentImage.value.url);\n            localStorage.setItem('failedImageUrls', JSON.stringify(storedFailedUrls));\n          }\n        } catch (error) {\n          console.error('无法存储失败的图片URL:', error);\n        }\n      }\n    };\n\n    // 检查图片是否已知失败\n    const checkImageBeforeLoad = () => {\n      if (currentImage.value && failedImageUrls.has(currentImage.value.url)) {\n        // 如果图片已知失败，直接标记为错误，不发送请求\n        loading.value = false;\n        hasError.value = true;\n        return false;\n      }\n      return true;\n    };\n\n    // 监听图片切换以检查失败状态\n    watch(currentImage, () => {\n      if (currentImage.value) {\n        checkImageBeforeLoad();\n      }\n    });\n\n    const handleZoomIn = () => {\n      if (scale.value < props.zoom.maxScale) {\n        scale.value += props.zoom.step;\n      }\n    };\n\n    const handleZoomOut = () => {\n      if (scale.value > props.zoom.minScale) {\n        scale.value -= props.zoom.step;\n      }\n    };\n\n    const handleRotateLeft = () => {\n      rotating.value = (rotating.value - 90) % 360;\n    };\n\n    const handleRotateRight = () => {\n      rotating.value = (rotating.value + 90) % 360;\n    };\n\n    const handleReset = () => {\n      resetImageStatus();\n    };\n\n    // 拖拽图片\n    const handleMouseDown = (e: MouseEvent) => {\n      e.preventDefault();\n      isMoving.value = true;\n      startX.value = e.clientX;\n      startY.value = e.clientY;\n    };\n\n    const handleMouseMove = (e: MouseEvent) => {\n      if (!isMoving.value) return;\n\n      const deltaX = e.clientX - startX.value;\n      const deltaY = e.clientY - startY.value;\n\n      moveX.value += deltaX / scale.value;\n      moveY.value += deltaY / scale.value;\n\n      startX.value = e.clientX;\n      startY.value = e.clientY;\n    };\n\n    const handleMouseUp = () => {\n      isMoving.value = false;\n    };\n\n    // 键盘事件处理\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (!isVisible.value) return;\n\n      switch (e.key) {\n        case 'Escape':\n          handleClose();\n          break;\n        case 'ArrowLeft':\n          prev();\n          break;\n        case 'ArrowRight':\n          next();\n          break;\n        case '+':\n          handleZoomIn();\n          break;\n        case '-':\n          handleZoomOut();\n          break;\n        case 'r':\n          handleRotateRight();\n          break;\n      }\n    };\n\n    // 添加/移除全局事件监听\n    onMounted(() => {\n      document.addEventListener('keydown', handleKeyDown);\n      document.addEventListener('mousemove', handleMouseMove);\n      document.addEventListener('mouseup', handleMouseUp);\n    });\n\n    onBeforeUnmount(() => {\n      document.removeEventListener('keydown', handleKeyDown);\n      document.removeEventListener('mousemove', handleMouseMove);\n      document.removeEventListener('mouseup', handleMouseUp);\n      document.body.style.overflow = '';\n    });\n\n    return {\n      isVisible,\n      currentIndex,\n      currentImage,\n      imageStyle,\n      loading,\n      hasError,\n      scale,\n      rotating,\n      handleClose,\n      prev,\n      next,\n      handleImageLoad,\n      handleImageError,\n      handleZoomIn,\n      handleZoomOut,\n      handleRotateLeft,\n      handleRotateRight,\n      handleReset,\n      handleMouseDown,\n      resetImageStatus,\n      isCurrentImageFailed,\n      checkImageBeforeLoad,\n    };\n  },\n\n  render() {\n    if (!this.isVisible) return null;\n\n    return (\n      <Teleport to=\"body\">\n        <div\n          class=\"fixed inset-0 z-[var(--z-index)] flex items-center justify-center backdrop-blur-sm transition-all duration-300 ease-out\"\n          style={{ '--z-index': this.zIndex }}\n          onClick={this.maskClosable ? this.handleClose : undefined}\n        >\n          {/* 背景层 */}\n          <div class=\"absolute inset-0 bg-black/70 dark:bg-black/85 animate-fadeIn\"></div>\n          \n          {/* 顶部工具栏 */}\n          <div class=\"absolute top-0 left-0 right-0 h-16 flex justify-between items-center px-6 z-10\">\n            <div class=\"text-white/80 text-sm font-medium tracking-wider\">\n              {this.currentImage?.alt || `图片 ${this.currentIndex + 1}`}\n            </div>\n            <button\n              class=\"w-10 h-10 flex items-center justify-center rounded-full text-white/80 hover:text-white backdrop-blur-md bg-white/10 hover:bg-white/20 transition-all duration-300 shadow-neo-sm\"\n              onClick={(e) => { e.stopPropagation(); this.handleClose(); }}\n            >\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                <path d=\"M18 6L6 18M6 6l12 12\" />\n              </svg>\n            </button>\n          </div>\n\n          {/* 图片展示区域 */}\n          <div\n            class=\"relative w-full h-full flex items-center justify-center\"\n            onClick={(e) => e.stopPropagation()}\n          >\n            {this.currentImage && (\n              <div class=\"relative max-w-full max-h-full overflow-hidden transition-all duration-300 ease-out\">\n                {this.loading && !this.isCurrentImageFailed && (\n                  <div class=\"absolute inset-0 flex items-center justify-center\">\n                    <div class=\"loading-spinner\"></div>\n                  </div>\n                )}\n\n                {(this.hasError || this.isCurrentImageFailed) && (\n                  <div class=\"absolute inset-0 flex flex-col items-center justify-center text-white/90 animate-fadeIn\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                      <path d=\"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m-6 4h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n                    </svg>\n                    <p class=\"mt-3 font-medium tracking-wide\">图片加载失败</p>\n                  </div>\n                )}\n\n                {/* 仅在图片未标记为已失败时加载图片 */}\n                {!this.isCurrentImageFailed && (\n                  <img\n                    src={this.currentImage.url}\n                    alt={this.currentImage.alt || '图片预览'}\n                    class={[\n                      'max-w-full max-h-full object-contain transition-opacity duration-500',\n                      this.loading || this.hasError ? 'opacity-0' : 'opacity-100',\n                      !this.loading && !this.hasError ? 'shadow-2xl' : ''\n                    ]}\n                    style={this.imageStyle}\n                    onLoad={this.handleImageLoad}\n                    onError={this.handleImageError}\n                    onMousedown={this.handleMouseDown}\n                  />\n                )}\n              </div>\n            )}\n          </div>\n\n          {/* 左右箭头 */}\n          {this.currentIndex > 0 && (\n            <button\n              class=\"absolute left-5 top-1/2 transform -translate-y-1/2 w-12 h-12 rounded-full backdrop-blur-md bg-white/10 hover:bg-white/20 flex items-center justify-center text-white/80 hover:text-white transition-all duration-300 shadow-neo group\"\n              onClick={(e) => { e.stopPropagation(); this.prev(); }}\n            >\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"group-hover:-translate-x-0.5 transition-transform duration-200\">\n                <path d=\"M15 18l-6-6 6-6\" />\n              </svg>\n            </button>\n          )}\n\n          {this.currentIndex < this.images.length - 1 && (\n            <button\n              class=\"absolute right-5 top-1/2 transform -translate-y-1/2 w-12 h-12 rounded-full backdrop-blur-md bg-white/10 hover:bg-white/20 flex items-center justify-center text-white/80 hover:text-white transition-all duration-300 shadow-neo group\"\n              onClick={(e) => { e.stopPropagation(); this.next(); }}\n            >\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"group-hover:translate-x-0.5 transition-transform duration-200\">\n                <path d=\"M9 18l6-6-6-6\" />\n              </svg>\n            </button>\n          )}\n\n          {/* 底部工具栏 */}\n          <div class=\"absolute bottom-6 left-1/2 transform -translate-x-1/2 flex justify-center items-center space-x-2 backdrop-blur-md bg-white/10 rounded-full px-2 py-1.5 shadow-neo\">\n            <button\n              class=\"w-10 h-10 flex items-center justify-center rounded-full text-white/80 hover:text-white hover:bg-white/10 transition-all duration-200\"\n              onClick={(e) => { e.stopPropagation(); this.handleZoomOut(); }}\n              title=\"缩小\"\n            >\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                <path d=\"M5 12h14\" />\n              </svg>\n            </button>\n\n            <div class=\"text-white/70 text-xs mx-1\">{Math.round(this.scale * 100)}%</div>\n\n            <button\n              class=\"w-10 h-10 flex items-center justify-center rounded-full text-white/80 hover:text-white hover:bg-white/10 transition-all duration-200\"\n              onClick={(e) => { e.stopPropagation(); this.handleZoomIn(); }}\n              title=\"放大\"\n            >\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                <path d=\"M12 5v14M5 12h14\" />\n              </svg>\n            </button>\n\n            <div class=\"w-px h-6 bg-white/20 mx-1\"></div>\n\n            <button\n              class=\"w-10 h-10 flex items-center justify-center rounded-full text-white/80 hover:text-white hover:bg-white/10 transition-all duration-200\"\n              onClick={(e) => { e.stopPropagation(); this.handleRotateLeft(); }}\n              title=\"向左旋转\"\n            >\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                <path d=\"M3 12a9 9 0 1 0 9-9 9 9 0 0 0-9 9z\" />\n                <path d=\"M9 9L3 12l6 3\" />\n              </svg>\n            </button>\n\n            <button\n              class=\"w-10 h-10 flex items-center justify-center rounded-full text-white/80 hover:text-white hover:bg-white/10 transition-all duration-200\"\n              onClick={(e) => { e.stopPropagation(); this.handleRotateRight(); }}\n              title=\"向右旋转\"\n            >\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                <path d=\"M21 12a9 9 0 1 1-9-9 9 9 0 0 1 9 9z\" />\n                <path d=\"M15 9l6 3-6 3\" />\n              </svg>\n            </button>\n\n            <div class=\"w-px h-6 bg-white/20 mx-1\"></div>\n\n            <button\n              class=\"w-10 h-10 flex items-center justify-center rounded-full text-white/80 hover:text-white hover:bg-white/10 transition-all duration-200\"\n              onClick={(e) => { e.stopPropagation(); this.handleReset(); }}\n              title=\"重置\"\n            >\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                <path d=\"M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2V9z\" />\n                <polyline points=\"9 22 9 12 15 12 15 22\" />\n              </svg>\n            </button>\n          </div>\n\n          {/* 底部缩略图 */}\n          {this.images.length > 1 && (\n            <div class=\"absolute bottom-24 left-0 right-0 flex justify-center\">\n              <div class=\"overflow-x-auto py-2 px-6 max-w-full\">\n                <div class=\"flex space-x-3 thumbnails-container\">\n                  {this.images.map((image, index) => (\n                    <div\n                      key={image.url + index}\n                      class={[\n                        'relative thumbnail-item',\n                        index === this.currentIndex ? 'active' : ''\n                      ]}\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        this.currentIndex = index;\n                        this.$emit('update:current', index);\n                        this.$emit('change', index);\n                        this.resetImageStatus();\n                      }}\n                    >\n                      <div class=\"w-20 h-20 overflow-hidden rounded-lg\">\n                        <img\n                          src={image.thumbnailUrl || image.url}\n                          alt={image.alt || `图片${index + 1}`}\n                          class=\"w-full h-full object-cover\"\n                        />\n                      </div>\n                      <div class=\"absolute bottom-0 left-0 right-0 h-1 bg-blue-500 scale-x-0 transition-transform duration-200 origin-left thumbnail-indicator\"></div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* 页码指示器 */}\n          <div class=\"absolute top-5 left-1/2 transform -translate-x-1/2 px-4 py-1.5 rounded-full backdrop-blur-md bg-white/10 text-white/90 text-xs font-medium tracking-wider shadow-neo-sm\">\n            {this.currentIndex + 1} / {this.images.length}\n          </div>\n        </div>\n      </Teleport>\n    );\n  }\n});\n","<template>\n    <div class=\"p-6 transition-colors bg-white dark:bg-gray-900 min-h-screen\">\n        <h1\n            class=\"text-3xl font-bold mb-8 text-gray-800 dark:text-white transition-colors tracking-tight flex items-center\">\n            <span class=\"bg-gradient-to-r from-blue-500 to-purple-600 h-8 w-2 rounded-full mr-3\"></span>\n            图片预览组件展示\n        </h1>\n\n        <!-- 图片预览组件 -->\n        <ImagePreview :images=\"images\" v-model:visible=\"showPreview\" v-model:current=\"currentIndex\"\n            :zoom=\"zoomConfig\" />\n\n        <!-- 展示区域 -->\n        <div class=\"mb-12\">\n            <h2 class=\"text-xl font-semibold mb-5 text-gray-700 dark:text-gray-200 transition-colors flex items-center\">\n                <span\n                    class=\"inline-block w-1.5 h-8 bg-gradient-to-b from-blue-500 to-purple-500 rounded-full mr-3\"></span>\n                点击图片预览\n            </h2>\n            <div class=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-5\">\n                <div v-for=\"(image, index) in images\" :key=\"image.url\"\n                    class=\"relative group rounded-xl cursor-pointer overflow-hidden modern-card transition-all duration-500 hover:-translate-y-1 shadow-lg dark:shadow-gray-800/20\"\n                    @click=\"openPreview(index)\">\n                    <div\n                        class=\"absolute inset-0 bg-gradient-to-br from-blue-500/20 to-purple-600/20 opacity-0 group-hover:opacity-100 transition-opacity duration-500 z-10\">\n                    </div>\n                    <img :src=\"image.thumbnailUrl || image.url\" :alt=\"image.alt\"\n                        class=\"w-full h-52 object-cover transition-all duration-500 group-hover:scale-110 brightness-90 group-hover:brightness-110\"\n                        @error=\"handleImageError\" />\n                    <div class=\"absolute inset-0 bg-gradient-to-t from-black/60 via-black/0 to-black/0 opacity-80 z-10\">\n                    </div>\n                    <div\n                        class=\"absolute bottom-0 left-0 right-0 p-4 z-20 transform translate-y-2 group-hover:translate-y-0 transition-transform duration-500\">\n                        <div class=\"text-white font-medium tracking-wide mb-1\">{{ image.alt }}</div>\n                        <div class=\"flex items-center\">\n                            <div class=\"text-white/70 text-sm\">点击预览</div>\n                            <div\n                                class=\"ml-auto bg-white/20 backdrop-blur-sm rounded-full p-1.5 transform translate-x-8 group-hover:translate-x-0 opacity-0 group-hover:opacity-100 transition-all duration-500\">\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\"\n                                    fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\"\n                                    stroke-linejoin=\"round\" class=\"text-white\">\n                                    <path d=\"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z\"></path>\n                                    <circle cx=\"12\" cy=\"12\" r=\"3\"></circle>\n                                </svg>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <!-- 功能说明区域 -->\n        <div class=\"grid grid-cols-1 md:grid-cols-2 gap-8 mb-12\">\n            <div\n                class=\"bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800/50 dark:to-gray-900 p-6 rounded-xl shadow-lg dark:shadow-gray-900/30 transition-colors border border-gray-100 dark:border-gray-800/50 relative overflow-hidden group\">\n                <div\n                    class=\"absolute inset-0 bg-gradient-to-r from-blue-500/5 to-purple-500/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500\">\n                </div>\n                <div\n                    class=\"absolute -right-10 -top-10 w-40 h-40 bg-gradient-to-br from-blue-500/10 to-purple-500/10 rounded-full blur-3xl group-hover:from-blue-500/20 group-hover:to-purple-500/20 transition-all duration-500\">\n                </div>\n\n                <h2\n                    class=\"text-lg font-semibold text-gray-800 dark:text-white mb-4 transition-colors flex items-center relative z-10\">\n                    <span class=\"text-blue-500 mr-2\">\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"22\" height=\"22\" viewBox=\"0 0 24 24\" fill=\"none\"\n                            stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                            <path\n                                d=\"M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3\">\n                            </path>\n                        </svg>\n                    </span>\n                    功能亮点\n                </h2>\n                <ul class=\"space-y-3 text-gray-700 dark:text-gray-300 transition-colors pl-2 relative z-10\">\n                    <li class=\"flex items-center group/item\">\n                        <span\n                            class=\"w-6 h-6 flex items-center justify-center rounded-full bg-blue-500/10 dark:bg-blue-500/20 text-blue-500 mr-3 group-hover/item:bg-blue-500/30 dark:group-hover/item:bg-blue-500/40 transition-colors\">✓</span>\n                        <span class=\"group-hover/item:translate-x-1 transition-transform\">支持暗色/亮色模式自适应</span>\n                    </li>\n                    <li class=\"flex items-center group/item\">\n                        <span\n                            class=\"w-6 h-6 flex items-center justify-center rounded-full bg-blue-500/10 dark:bg-blue-500/20 text-blue-500 mr-3 group-hover/item:bg-blue-500/30 dark:group-hover/item:bg-blue-500/40 transition-colors\">✓</span>\n                        <span class=\"group-hover/item:translate-x-1 transition-transform\">图片缩放、旋转功能</span>\n                    </li>\n                    <li class=\"flex items-center group/item\">\n                        <span\n                            class=\"w-6 h-6 flex items-center justify-center rounded-full bg-blue-500/10 dark:bg-blue-500/20 text-blue-500 mr-3 group-hover/item:bg-blue-500/30 dark:group-hover/item:bg-blue-500/40 transition-colors\">✓</span>\n                        <span class=\"group-hover/item:translate-x-1 transition-transform\">图片拖拽移动</span>\n                    </li>\n                    <li class=\"flex items-center group/item\">\n                        <span\n                            class=\"w-6 h-6 flex items-center justify-center rounded-full bg-blue-500/10 dark:bg-blue-500/20 text-blue-500 mr-3 group-hover/item:bg-blue-500/30 dark:group-hover/item:bg-blue-500/40 transition-colors\">✓</span>\n                        <span class=\"group-hover/item:translate-x-1 transition-transform\">键盘快捷键支持</span>\n                    </li>\n                    <li class=\"flex items-center group/item\">\n                        <span\n                            class=\"w-6 h-6 flex items-center justify-center rounded-full bg-blue-500/10 dark:bg-blue-500/20 text-blue-500 mr-3 group-hover/item:bg-blue-500/30 dark:group-hover/item:bg-blue-500/40 transition-colors\">✓</span>\n                        <span class=\"group-hover/item:translate-x-1 transition-transform\">缩略图导航栏</span>\n                    </li>\n                    <li class=\"flex items-center group/item\">\n                        <span\n                            class=\"w-6 h-6 flex items-center justify-center rounded-full bg-blue-500/10 dark:bg-blue-500/20 text-blue-500 mr-3 group-hover/item:bg-blue-500/30 dark:group-hover/item:bg-blue-500/40 transition-colors\">✓</span>\n                        <span class=\"group-hover/item:translate-x-1 transition-transform\">加载状态与错误处理</span>\n                    </li>\n                </ul>\n            </div>\n\n            <div\n                class=\"bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800/50 dark:to-gray-900 p-6 rounded-xl shadow-lg dark:shadow-gray-900/30 transition-colors border border-gray-100 dark:border-gray-800/50 relative overflow-hidden group\">\n                <div\n                    class=\"absolute inset-0 bg-gradient-to-r from-blue-500/5 to-purple-500/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500\">\n                </div>\n                <div\n                    class=\"absolute -right-10 -top-10 w-40 h-40 bg-gradient-to-br from-blue-500/10 to-purple-500/10 rounded-full blur-3xl group-hover:from-blue-500/20 group-hover:to-purple-500/20 transition-all duration-500\">\n                </div>\n\n                <h2\n                    class=\"text-lg font-semibold text-gray-800 dark:text-white mb-4 transition-colors flex items-center relative z-10\">\n                    <span class=\"text-blue-500 mr-2\">\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"22\" height=\"22\" viewBox=\"0 0 24 24\" fill=\"none\"\n                            stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                            <rect x=\"3\" y=\"11\" width=\"18\" height=\"11\" rx=\"2\" ry=\"2\"></rect>\n                            <path d=\"M7 11V7a5 5 0 0 1 10 0v4\"></path>\n                        </svg>\n                    </span>\n                    键盘快捷键\n                </h2>\n                <div class=\"grid grid-cols-2 gap-4 text-gray-700 dark:text-gray-300 transition-colors relative z-10\">\n                    <div\n                        class=\"flex items-center p-2 rounded-lg hover:bg-gray-200/50 dark:hover:bg-gray-700/50 transition-colors group/btn\">\n                        <span\n                            class=\"bg-gray-200 dark:bg-gray-700 w-8 h-8 flex items-center justify-center rounded-md mr-3 text-sm font-mono transition-colors shadow-sm group-hover/btn:bg-blue-500/20 dark:group-hover/btn:bg-blue-500/30\">←</span>\n                        <span class=\"group-hover/btn:translate-x-1 transition-transform\">上一张图片</span>\n                    </div>\n                    <div\n                        class=\"flex items-center p-2 rounded-lg hover:bg-gray-200/50 dark:hover:bg-gray-700/50 transition-colors group/btn\">\n                        <span\n                            class=\"bg-gray-200 dark:bg-gray-700 w-8 h-8 flex items-center justify-center rounded-md mr-3 text-sm font-mono transition-colors shadow-sm group-hover/btn:bg-blue-500/20 dark:group-hover/btn:bg-blue-500/30\">→</span>\n                        <span class=\"group-hover/btn:translate-x-1 transition-transform\">下一张图片</span>\n                    </div>\n                    <div\n                        class=\"flex items-center p-2 rounded-lg hover:bg-gray-200/50 dark:hover:bg-gray-700/50 transition-colors group/btn\">\n                        <span\n                            class=\"bg-gray-200 dark:bg-gray-700 w-8 h-8 flex items-center justify-center rounded-md mr-3 text-sm font-mono transition-colors shadow-sm group-hover/btn:bg-blue-500/20 dark:group-hover/btn:bg-blue-500/30\">+</span>\n                        <span class=\"group-hover/btn:translate-x-1 transition-transform\">放大图片</span>\n                    </div>\n                    <div\n                        class=\"flex items-center p-2 rounded-lg hover:bg-gray-200/50 dark:hover:bg-gray-700/50 transition-colors group/btn\">\n                        <span\n                            class=\"bg-gray-200 dark:bg-gray-700 w-8 h-8 flex items-center justify-center rounded-md mr-3 text-sm font-mono transition-colors shadow-sm group-hover/btn:bg-blue-500/20 dark:group-hover/btn:bg-blue-500/30\">-</span>\n                        <span class=\"group-hover/btn:translate-x-1 transition-transform\">缩小图片</span>\n                    </div>\n                    <div\n                        class=\"flex items-center p-2 rounded-lg hover:bg-gray-200/50 dark:hover:bg-gray-700/50 transition-colors group/btn\">\n                        <span\n                            class=\"bg-gray-200 dark:bg-gray-700 w-8 h-8 flex items-center justify-center rounded-md mr-3 text-sm font-mono transition-colors shadow-sm group-hover/btn:bg-blue-500/20 dark:group-hover/btn:bg-blue-500/30\">r</span>\n                        <span class=\"group-hover/btn:translate-x-1 transition-transform\">旋转图片</span>\n                    </div>\n                    <div\n                        class=\"flex items-center p-2 rounded-lg hover:bg-gray-200/50 dark:hover:bg-gray-700/50 transition-colors group/btn\">\n                        <span\n                            class=\"bg-gray-200 dark:bg-gray-700 w-8 h-8 flex items-center justify-center rounded-md mr-3 text-sm font-mono transition-colors shadow-sm group-hover/btn:bg-blue-500/20 dark:group-hover/btn:bg-blue-500/30\">Esc</span>\n                        <span class=\"group-hover/btn:translate-x-1 transition-transform\">关闭预览</span>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <!-- 功能区域按钮 -->\n        <div class=\"mt-10 flex flex-wrap gap-4\">\n            <button\n                class=\"px-5 py-2.5 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg transition-all duration-300 shadow-lg hover:shadow-blue-500/25 flex items-center gap-2 group\"\n                @click=\"openPreview(0)\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\"\n                    stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"\n                    class=\"group-hover:scale-110 transition-transform\">\n                    <rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"></rect>\n                    <circle cx=\"8.5\" cy=\"8.5\" r=\"1.5\"></circle>\n                    <polyline points=\"21 15 16 10 5 21\"></polyline>\n                </svg>\n                <span>预览全部图片</span>\n            </button>\n            <button\n                class=\"px-5 py-2.5 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white rounded-lg transition-all duration-300 shadow-lg hover:shadow-purple-500/25 flex items-center gap-2 group\"\n                @click=\"openPreview(4)\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\"\n                    stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"\n                    class=\"group-hover:scale-110 transition-transform\">\n                    <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\n                    <line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"12\"></line>\n                    <line x1=\"12\" y1=\"16\" x2=\"12.01\" y2=\"16\"></line>\n                </svg>\n                <span>查看加载错误状态</span>\n            </button>\n        </div>\n    </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, onMounted, reactive } from 'vue';\nimport ImagePreview from './ImagePreview';\n\n// 定义图片接口\ninterface Image {\n    url: string;\n    alt: string;\n    thumbnailUrl?: string;\n}\n\n// 定义缩放配置接口\ninterface ZoomConfig {\n    minScale: number;\n    maxScale: number;\n    step: number;\n}\n\n// 示例图片\nconst images = ref<Image[]>([\n    {\n        url: 'https://images.unsplash.com/photo-1499856871958-5b9627545d1a?ixlib=rb-1.2.1&auto=format&fit=crop&w=1500&q=80',\n        alt: '城市风光',\n        thumbnailUrl: 'https://images.unsplash.com/photo-1499856871958-5b9627545d1a?ixlib=rb-1.2.1&auto=format&fit=crop&w=300&q=60'\n    },\n    {\n        url: 'https://images.unsplash.com/photo-1470770841072-f978cf4d019e?ixlib=rb-1.2.1&auto=format&fit=crop&w=1500&q=80',\n        alt: '山水自然',\n        thumbnailUrl: 'https://images.unsplash.com/photo-1470770841072-f978cf4d019e?ixlib=rb-1.2.1&auto=format&fit=crop&w=300&q=60'\n    },\n    {\n        url: 'https://images.unsplash.com/photo-1510797215324-95aa89f43c33?ixlib=rb-1.2.1&auto=format&fit=crop&w=1500&q=80',\n        alt: '森林',\n        thumbnailUrl: 'https://images.unsplash.com/photo-1510797215324-95aa89f43c33?ixlib=rb-1.2.1&auto=format&fit=crop&w=300&q=60'\n    },\n    {\n        url: 'https://images.unsplash.com/photo-1446329813274-7c9036bd9a1f?ixlib=rb-1.2.1&auto=format&fit=crop&w=1500&q=80',\n        alt: '海洋风光',\n        thumbnailUrl: 'https://images.unsplash.com/photo-1446329813274-7c9036bd9a1f?ixlib=rb-1.2.1&auto=format&fit=crop&w=300&q=60'\n    },\n    {\n        url: '/invalid-image-url.jpg',\n        alt: '加载失败的图片',\n    }\n]);\n\nconst showPreview = ref<boolean>(false);\nconst currentIndex = ref<number>(0);\n\n// 自定义缩放配置\nconst zoomConfig: ZoomConfig = {\n    minScale: 0.2,\n    maxScale: 5,\n    step: 0.5\n};\n\nconst openPreview = (index: number): void => {\n    currentIndex.value = index;\n    showPreview.value = true;\n};\n\nconst handleImageError = function (e: Event): void {\n    const target = e.target as HTMLImageElement;\n    const originalSrc = target.getAttribute('data-original-src') || target.src;\n\n    // 确保这个处理程序只触发一次\n    // 移除当前绑定的错误事件处理器\n    target.onerror = null;\n\n    console.log(`图片 ${originalSrc} 加载失败，不再重试`);\n\n    // 保存原始src以便于识别\n    target.setAttribute('data-original-src', originalSrc);\n\n    // 立即设置为占位图，但防止这个操作触发新的错误事件\n    setTimeout(() => {\n        target.src = 'https://via.placeholder.com/300x200?text=加载失败';\n    }, 0);\n};\n\n// 组件挂载时的钩子\nonMounted(() => {\n    // 清空不必要的初始化代码\n});\n</script>\n\n<style>\n/* 可以添加一些额外的动画样式 */\n.fade-enter-active,\n.fade-leave-active {\n    transition: opacity 0.3s ease;\n}\n\n.fade-enter-from,\n.fade-leave-to {\n    opacity: 0;\n}\n\n/* 添加骨架屏淡入淡出效果 */\n@keyframes pulse {\n    0% {\n        opacity: 0.6;\n    }\n\n    50% {\n        opacity: 1;\n    }\n\n    100% {\n        opacity: 0.6;\n    }\n}\n\n.skeleton {\n    animation: pulse 1.5s infinite;\n    background-color: rgba(200, 200, 200, 0.3);\n}\n\n/* 暗色模式下调整骨架屏颜色 */\n.dark .skeleton {\n    background-color: rgba(60, 60, 60, 0.4);\n}\n\n/* 从底部弹出的过渡效果 */\n.slide-up-enter-active,\n.slide-up-leave-active {\n    transition: transform 0.3s ease, opacity 0.3s ease;\n}\n\n.slide-up-enter-from,\n.slide-up-leave-to {\n    transform: translateY(10px);\n    opacity: 0;\n}\n\n/* 新增现代卡片样式 */\n.modern-card {\n    box-shadow: 0 10px 30px -5px rgba(0, 0, 0, 0.1);\n    transition: transform 0.5s, box-shadow 0.5s;\n}\n\n.modern-card:hover {\n    box-shadow: 0 20px 40px -10px rgba(0, 0, 0, 0.2);\n}\n\n.dark .modern-card {\n    box-shadow: 0 10px 30px -5px rgba(0, 0, 0, 0.3);\n}\n\n.dark .modern-card:hover {\n    box-shadow: 0 20px 40px -10px rgba(0, 0, 0, 0.5);\n}\n</style>\n"],"names":["defineComponent","name","props","images","type","Array","required","visible","Boolean","default","current","Number","maskClosable","animated","zIndex","zoom","Object","minScale","maxScale","step","emits","setup","emit","isVisible","ref","currentIndex","scale","rotating","isMoving","startX","startY","moveX","moveY","loading","hasError","failedImageUrls","inject","Set","watch","val","value","document","body","style","overflow","nextTick","resetImageStatus","currentImage","computed","isCurrentImageFailed","has","url","imageStyle","transform","transition","handleClose","prev","next","length","handleImageLoad","handleImageError","add","storedFailedUrls","JSON","parse","localStorage","getItem","includes","push","setItem","stringify","error","console","checkImageBeforeLoad","handleZoomIn","handleZoomOut","handleRotateLeft","handleRotateRight","handleReset","handleMouseDown","e","preventDefault","clientX","clientY","handleMouseMove","deltaX","deltaY","handleMouseUp","handleKeyDown","key","onMounted","addEventListener","onBeforeUnmount","removeEventListener","render","_createVNode","Teleport","undefined","_a","alt","stopPropagation","_createTextVNode","Math","round","map","image","index","$emit","thumbnailUrl","showPreview","zoomConfig","openPreview","target","originalSrc"],"mappings":"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"}